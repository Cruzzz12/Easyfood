{% extends 'recipes/base.html' %}

{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="mb-0">Mis recetas guardadas</h1>
    <a href="/" class="btn btn-outline-secondary">Volver</a>
  </div>

  <div class="row gy-3">
    {% for r in recipes %}
      <div class="col-12">
        <div class="card list-card">
          <div class="row g-0">
            {% if r.image %}
            <div class="col-md-3 img-col">
              <img src="{{ r.image.url }}" class="" alt="{{ r.title }}">
            </div>
            <div class="col-md-9 content-col">
            {% else %}
            <div class="col-12 content-col">
            {% endif %}
              <div class="card-body">
                <div>
                  <h5 class="card-title"><a href="{% url 'recipes:detail' r.pk %}" class="stretched-link text-decoration-none">{{ r.title }}</a></h5>
                  <p class="card-text text-muted small mb-2">{{ r.description|striptags|truncatewords:30|linebreaksbr }}</p>
                </div>
                <div>
                  <p class="card-text small-muted mb-0"><i class="bi bi-clock me-1"></i>{% if r.estimated_time %}{{ r.estimated_time }} min{% else %}-{% endif %}</p>
                  <p class="card-text small-muted mb-0"><i class="bi bi-list-ul me-1"></i>
                    {% for i in r.ingredients.all|slice:":6" %}
                      <span class="ingredient-badge">{{ i.name }}</span>
                    {% empty %}
                      -
                    {% endfor %}
                    {% if r.ingredients.count > 6 %} <span class="text-muted">... y m√°s</span>{% endif %}
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    {% empty %}
      <div class="col-12">
        <div class="alert alert-info">No tienes recetas guardadas.</div>
      </div>
    {% endfor %}
  </div>
{% endblock %}
